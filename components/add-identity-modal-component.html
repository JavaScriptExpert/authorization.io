<br-modal br-title="Add Identity">
  <br-modal-body>
    <p>
      If you have another identity you'd like to use with this device, please
      enter the email address and passphrase associated with it. If you do not
      have another identity, you'll need to visit an identity provider of
      your choice and register a new one.
    </p>
    <hr/>
    <div class="row">
      <form name="$ctrl.addIdentityForm" class="form-horizontal" role="form">
        <fieldset>
          <br-input br-model="$ctrl.email"
            br-input-ng-keyup="$event.keyCode === 13 && !$ctrl.loading &&
              $ctrl.email && $ctrl.passphrase && $ctrl.add()"
            br-options="{
              name: 'email',
              label: 'Email',
              showValidation: true,
              autofocus: true,
              disabled: {{$ctrl.loading}}
            }" ng-minlength="6" ng-maxlength="128" required>
            <br-input-help>
              Please enter your email address.
            </br-input-help>
            <br-input-validation-errors>
              <p ng-show="$ctrl.addIdentityForm.email.$error.required">
                Email is required.
              </p>
              <p ng-show="$ctrl.addIdentityForm.email.$error.minlength">
                Email is required to be at least 6 characters.
              </p>
              <p ng-show="$ctrl.addIdentityForm.email.$error.maxlength">
                Email must not be longer than 128 characters.
              </p>
            </br-input-validation-errors>
          </br-input>
          <br-input br-model="$ctrl.passphrase"
            br-input-ng-keyup="$event.keyCode === 13 && !$ctrl.loading &&
              $ctrl.email && $ctrl.passphrase && $ctrl.add()"
            br-options="{
              name: 'passphrase',
              label: 'Passphrase',
              type: 'password',
              showValidation: true,
              disabled: {{$ctrl.loading}}
            }" ng-minlength="6" ng-maxlength="128" required>
            <br-input-help>
              Please enter a passphrase.
            </br-input-help>
            <br-input-validation-errors>
              <p ng-show="$ctrl.addIdentityForm.passphrase.$error.required">
                Passphrase is required.
              </p>
              <p ng-show="$ctrl.addIdentityForm.passphrase.$error.minlength">
                Passphrase is required to be at least 6 characters.
              </p>
              <p ng-show="$ctrl.addIdentityForm.passphrase.$error.maxlength">
                Passphrase must not be longer than 128 characters.
              </p>
            </br-input-validation-errors>
          </br-input>
          <div class="form-group">
            <div class="col-sm-offset-3 col-sm-8">
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="$ctrl.permanent">
                    Remember me on this device
                </label>
              </div>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </br-modal-body>
  <br-modal-footer>
    <span ng-show="$ctrl.generating">Please wait, this may take a minute...</span>
    <span ng-show="$ctrl.loading">
      <i class="fa fa-refresh fa-spin text-muted"></i>
    </span>
    <span>
      <button type="button" class="btn btn-primary"
        ng-disabled="$ctrl.loading || !$ctrl.email || !$ctrl.passphrase"
        ng-click="$ctrl.add()"><i class="fa fa-check"></i> Add</button>
    </span>
    <button type="button" class="btn btn-default stackable-cancel"
      ng-disabled="$ctrl.loading">Cancel</button>
  </br-modal-footer>
</br-modal>
